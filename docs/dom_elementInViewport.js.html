<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>dom/elementInViewport.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addFlag">addFlag</a></li><li><a href="global.html#arrayEqual">arrayEqual</a></li><li><a href="global.html#arrayRandomSort">arrayRandomSort</a></li><li><a href="global.html#buildUrlQuery">buildUrlQuery</a></li><li><a href="global.html#dateFormat">dateFormat</a></li><li><a href="global.html#elementInViewport">elementInViewport</a></li><li><a href="global.html#hasFlag">hasFlag</a></li><li><a href="global.html#isAlipay">isAlipay</a></li><li><a href="global.html#isAndroid">isAndroid</a></li><li><a href="global.html#isEmail">isEmail</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#isIOS">isIOS</a></li><li><a href="global.html#isiPad">isiPad</a></li><li><a href="global.html#isiPhone">isiPhone</a></li><li><a href="global.html#isiPod">isiPod</a></li><li><a href="global.html#isMobile">isMobile</a></li><li><a href="global.html#isNaN">isNaN</a></li><li><a href="global.html#isPhoneNo">isPhoneNo</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#isWeixin">isWeixin</a></li><li><a href="global.html#isWindowsPhone">isWindowsPhone</a></li><li><a href="global.html#prefixStyle">prefixStyle</a></li><li><a href="global.html#queryString">queryString</a></li><li><a href="global.html#randomColor">randomColor</a></li><li><a href="global.html#randomGuid">randomGuid</a></li><li><a href="global.html#randomNumber">randomNumber</a></li><li><a href="global.html#removeFlag">removeFlag</a></li><li><a href="global.html#supportHistoryAPI">supportHistoryAPI</a></li><li><a href="global.html#supportTouch">supportTouch</a></li><li><a href="global.html#supportTransforms3d">supportTransforms3d</a></li><li><a href="global.html#supportWorker">supportWorker</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">dom/elementInViewport.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 判断某个dom元素是否可视区域
 * @param {HTMLElement} el - 要判断的dom元素 支持jQuery对象
 * @param {Boolean} [allInViewport=false] - 是否严格要求全部在viewport true 必须全部在viewport里才算是在viewport中 false 有一小部分在viewport就算是在
 * @param {number} [diff=0] - 允许多少误差 正数
 * @see http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport/7557433#7557433
 * @example
 * var elementInViewport = require('js-weapon/elementInViewport');
 * elementInViewport(el);
 */
function elementInViewport(el, allInViewport = false, diff = 0) {
  if (!el) return false;
  allInViewport = allInViewport || false;
  diff = diff || 0;
  const rect = el.getBoundingClientRect();
  const w = rect.right - rect.left;
  const h = rect.bottom - rect.top;
  const screenWidth = (window.innerWidth || document.documentElement.clientWidth);/*or $(window).height() */
  const screenHeight = (window.innerHeight || document.documentElement.clientHeight);/*or $(window).width() */
  if (allInViewport) {
    return (
      rect.top >= 0 &amp;&amp;
      rect.left >= 0 &amp;&amp;
      rect.bottom &lt;= screenHeight &amp;&amp;
      rect.right &lt;= screenWidth
    );
  } else {
    return (
      rect.top > (-h - diff) &amp;&amp;
      rect.left > (-w - diff) &amp;&amp;
      rect.top &lt; (screenHeight + diff) &amp;&amp;
      rect.left &lt; (screenWidth + diff)
    );
  }
}

module.exports = elementInViewport;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Dec 17 2017 17:29:30 GMT+0800 (CST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
